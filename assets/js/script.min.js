function isLoaded(){loadedImages++;var e=Math.floor(loadedImages/numberImages*100);$(".loaded").width(e.toString()+"%"),$("#progress span").text(e.toString()),loadedImages>=numberImages&&loaded()}function preload(){$("#status").show();var e=[{name:"font_gypsy",src:fonts+"gypsykiller.ttf"},{name:"l1_a",src:images+"creator/ardor/layer1.png"},{name:"l1_w",src:images+"creator/whirlwind/layer1.png"},{name:"l1_t",src:images+"creator/thunder/layer1.png"},{name:"l1_l",src:images+"creator/light/layer1.png"},{name:"l1_d",src:images+"creator/dark/layer1.png"},{name:"l2",src:images+"creator/global/layer2.png"},{name:"l3a_a",src:images+"creator/ardor/layer3_attr.png"},{name:"l3a_w",src:images+"creator/whirlwind/layer3_attr.png"},{name:"l3a_t",src:images+"creator/thunder/layer3_attr.png"},{name:"l3a_l",src:images+"creator/light/layer3_attr.png"},{name:"l3a_d",src:images+"creator/dark/layer3_attr.png"},{name:"l3s_2",src:images+"creator/global/layer3_2star.png"},{name:"l3s_3",src:images+"creator/global/layer3_3star.png"},{name:"l3s_4",src:images+"creator/global/layer3_4star.png"},{name:"l3s_5",src:images+"creator/global/layer3_5star.png"},{name:"l3s_6",src:images+"creator/global/layer3_6star.png"},{name:"l3s_7",src:images+"creator/global/layer3_7star.png"},{name:"l3v_0",src:images+"creator/global/layer3_voice-off.png"},{name:"l3v_1",src:images+"creator/global/layer3_voice-on.png"},{name:"l4_a",src:images+"creator/ardor/layer4.png"},{name:"l4_w",src:images+"creator/whirlwind/layer4.png"},{name:"l4_t",src:images+"creator/thunder/layer4.png"},{name:"l4_l",src:images+"creator/light/layer4.png"},{name:"l4_d",src:images+"creator/dark/layer4.png"},{name:"custom",src:""}];e.forEach(function(e){img[e.name]=new Image,"font_gypsy"==e.name?img[e.name].onerror=function(){isLoaded()}:img[e.name].onload=function(){isLoaded()},img[e.name].src=e.src}),layer={1:img["l1_"+attr],2:img.l2,"3a":img["l3a_"+attr],"3v":img.l3v_1,"3s":img.l3s_5,4:img["l4_"+attr]}}function loaded(){function e(){if($("#status").show(),$("#loader").show(),$("#statusMsg").html("Working..."),t(),layer[1]=img["l1_"+attr],layer[2]=img.l2,layer["3a"]=img["l3a_"+attr],layer["3s"]=img["l3s_"+l.value],layer["3v"]=img.l3v_1,layer[4]=img["l4_"+attr],ctx.clearRect(0,0,canvas.width,canvas.height),ctx.save(),ctx.beginPath(),ctx.rect(10,10,508,780),ctx.clip(),ctx.drawImage(layer[1],0,0,layer[1].width,layer[1].height,0,0,canvas.width,canvas.height),r){ctx.restore(),ctx.save(),ctx.beginPath(),ctx.rect(10,10,508,780),ctx.clip(),ctx.translate(canvas.width/2,canvas.height/2);var e=document.getElementById("cusScale").value;ctx.scale(e,e),ctx.translate(-canvas.width/2,-canvas.height/2);var a=document.getElementById("cusRotate").value,g=a*Math.PI/180;ctx.rotate(g);var o=document.getElementById("cusX").value,m=document.getElementById("cusY").value;ctx.translate(o,m),ctx.drawImage(img.custom,0,0),ctx.restore(),ctx.save()}ctx.drawImage(layer[2],0,0),ctx.drawImage(layer["3a"],0,0),ctx.restore(),ctx.drawImage(layer["3s"],0,677),ctx.drawImage(layer["3v"],0,677),ctx.drawImage(layer[4],0,0),ctx.font="18pt arial narrow, arial, sans-serif",ctx.strokeStyle="black",ctx.fillStyle="yellow",ctx.textAlign="center";var d="[Lv."+n.value+"] "+c.value,u="[Lv."+n.value+"] ",x=ctx.measureText(d).width,v=canvas.width/2-x/2;ctx.beginPath(),ctx.textAlign="start",ctx.strokeText(u,v,770),ctx.fillText(u,v,770),v+=ctx.measureText(u).width,ctx.closePath(),ctx.beginPath(),ctx.fillStyle="white",ctx.strokeText(c.value,v,770),ctx.fillText(c.value,v,770),ctx.closePath(),ctx.beginPath(),ctx.fillStyle="white",ctx.font="italic 12pt gypsykiller",ctx.strokeText("COST",370,37),ctx.fillText("COST",370,37),ctx.textAlign="right",ctx.font="32pt gypsykiller",ctx.strokeText(s.value,500,50),ctx.fillText(s.value,500,50),ctx.closePath(),i.value>0&&(ctx.beginPath(),ctx.textAlign="right",ctx.font="24pt sans-serif",ctx.fillStyle="#99cc33",ctx.strokeText("+"+i.value,510,775),ctx.fillText("+"+i.value,510,775),ctx.closePath()),ctx.save();var y="ripoffsoccercards.tk - Soccer Spirits (C) Com2uS";ctx.beginPath(),ctx.globalAlpha=.5,ctx.font="9pt sans-serif",ctx.textAlign="center",ctx.fillStyle="black",ctx.fillText(y,canvas.width/2,792),ctx.closePath(),ctx.restore()}function a(){if(this.files&&this.files[0]){var a=new FileReader;a.onload=function(a){var t=new Image;t.onload=function(){img.custom=t,e()},t.src=a.target.result},a.readAsDataURL(this.files[0])}$(".custom").prop("disabled",!1)}function t(){l.value>7?l.value=7:l.value<2&&(l.value=2)}$("#fileUpload").on("change",function(){if(this.files&&this.files[0]){var a=new FileReader;a.onload=function(a){var t=new Image;t.onload=function(){img.custom=t,e()},t.src=a.target.result},a.readAsDataURL(this.files[0])}$(".custom").prop("disabled",!1)});var r=document.getElementById("fileUpload");r.addEventListener("change",a,!1);var l=document.getElementById("cusTextRank");l.addEventListener("change",e,!1);var c=document.getElementById("cusTextName");c.addEventListener("change",e,!1);var n=document.getElementById("cusTextLvl");n.addEventListener("change",e,!1);var s=document.getElementById("cusTextCost");s.addEventListener("change",e,!1);var i=document.getElementById("cusTextSkill");i.addEventListener("change",e,!1);var g=document.getElementById("cusScale");g.addEventListener("change",e,!1);var o=document.getElementById("cusRotate");o.addEventListener("change",e,!1);var m=document.getElementById("cusX");m.addEventListener("change",e,!1);var d=document.getElementById("cusY");d.addEventListener("change",e,!1),$("#progress").hide(),$("#all").show(),$(".custom").prop("disabled",!0),$("#reset").click(function(){ctx.drawImage(gray,0,0),r="",r.value="",$(".custom").prop("disabled",!0),l.value=3,c.value="Name",n.value=1,s.value=10,i.value=1,g.value=1,m.value=0,d.value=0}),$(".attr").click(function(){attr=this.value,e()})}var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),container=document.getElementById("container"),images="./assets/img/",fonts="./assets/fonts/",img={},layer={},attr="a",loadedImages=0,numberImages=24,gray=new Image;gray.onload=function(){ctx.drawImage(gray,0,0)},gray.src=images+"creator/gray.png",preload();