function isLoaded(){loadedImages++;var e=Math.floor(loadedImages/numberImages*100);$(".loaded").width(e.toString()+"%");$("#progress span").text(e.toString());if(loadedImages>=numberImages)loaded()}function preload(){$("#status").show();var e=[{name:"font_gypsy",src:fonts+"gypsykiller.ttf"},{name:"l1_a",src:images+"creator/ardor/layer1.png"},{name:"l1_w",src:images+"creator/whirlwind/layer1.png"},{name:"l1_t",src:images+"creator/thunder/layer1.png"},{name:"l1_l",src:images+"creator/light/layer1.png"},{name:"l1_d",src:images+"creator/dark/layer1.png"},{name:"l2",src:images+"creator/global/layer2.png"},{name:"l3a_a",src:images+"creator/ardor/layer3_attr.png"},{name:"l3a_w",src:images+"creator/whirlwind/layer3_attr.png"},{name:"l3a_t",src:images+"creator/thunder/layer3_attr.png"},{name:"l3a_l",src:images+"creator/light/layer3_attr.png"},{name:"l3a_d",src:images+"creator/dark/layer3_attr.png"},{name:"l3s_2",src:images+"creator/global/layer3_2star.png"},{name:"l3s_3",src:images+"creator/global/layer3_3star.png"},{name:"l3s_4",src:images+"creator/global/layer3_4star.png"},{name:"l3s_5",src:images+"creator/global/layer3_5star.png"},{name:"l3s_6",src:images+"creator/global/layer3_6star.png"},{name:"l3s_7",src:images+"creator/global/layer3_7star.png"},{name:"l3v_0",src:images+"creator/global/layer3_voice-off.png"},{name:"l3v_1",src:images+"creator/global/layer3_voice-on.png"},{name:"l4_a",src:images+"creator/ardor/layer4.png"},{name:"l4_w",src:images+"creator/whirlwind/layer4.png"},{name:"l4_t",src:images+"creator/thunder/layer4.png"},{name:"l4_l",src:images+"creator/light/layer4.png"},{name:"l4_d",src:images+"creator/dark/layer4.png"},{name:"custom",src:""}];e.forEach(function(e){img[e.name]=new Image;if(e.name=="font_gypsy"){img[e.name].onerror=function(){isLoaded()}}else{img[e.name].onload=function(){isLoaded()}}img[e.name].src=e.src});layer={1:img["l1_"+attr],2:img["l2"],"3a":img["l3a_"+attr],"3v":img["l3v_1"],"3s":img["l3s_5"],4:img["l4_"+attr]}}function loaded(){function l(){$("#status").show();$("#loader").show();$("#statusMsg").html("Working...");layer["1"]=img["l1_"+attr];layer["2"]=img["l2"];layer["3a"]=img["l3a_"+attr];layer["3s"]=img["l3s_"+t.value];layer["3v"]=img["l3v_"+1];layer["4"]=img["l4_"+attr];ctx.clearRect(0,0,canvas.width,canvas.height);ctx.save();ctx.beginPath();ctx.rect(10,10,508,780);ctx.clip();ctx.drawImage(layer["1"],0,0,layer["1"].width,layer["1"].height,0,0,canvas.width,canvas.height);if(e){ctx.restore();ctx.save();ctx.beginPath();ctx.rect(10,10,508,780);ctx.clip();ctx.translate(canvas.width/2,canvas.height/2);var o=document.getElementById("cusScale").value;ctx.scale(o,o);ctx.translate(-canvas.width/2,-canvas.height/2);var u=document.getElementById("cusRotate").value;var a=u*Math.PI/180;ctx.rotate(a);var f=document.getElementById("cusX").value;var l=document.getElementById("cusY").value;ctx.translate(f,l);ctx.drawImage(img["custom"],0,0);ctx.restore();ctx.save()}ctx.drawImage(layer["2"],0,0);ctx.drawImage(layer["3a"],0,0);ctx.restore();ctx.drawImage(layer["3s"],0,677);ctx.drawImage(layer["3v"],0,677);ctx.drawImage(layer["4"],0,0);ctx.font="18pt arial narrow, arial, sans-serif";ctx.strokeStyle="black";ctx.fillStyle="yellow";ctx.textAlign="center";var c="[Lv."+r.value+"] "+n.value;var h="[Lv."+r.value+"] ";var p=ctx.measureText(c).width;var d=canvas.width/2-p/2;ctx.beginPath();ctx.textAlign="start";ctx.strokeText(h,d,770);ctx.fillText(h,d,770);d+=ctx.measureText(h).width;ctx.closePath();ctx.beginPath();ctx.fillStyle="white";ctx.strokeText(n.value,d,770);ctx.fillText(n.value,d,770);ctx.closePath();ctx.beginPath();ctx.fillStyle="white";ctx.font="italic 12pt gypsykiller";ctx.strokeText("COST",370,37);ctx.fillText("COST",370,37);ctx.textAlign="right";ctx.font="32pt gypsykiller";ctx.strokeText(i.value,500,50);ctx.fillText(i.value,500,50);ctx.closePath();if(s.value>0){ctx.beginPath();ctx.textAlign="right";ctx.font="24pt sans-serif";ctx.fillStyle="#99cc33";ctx.strokeText("+"+s.value,510,775);ctx.fillText("+"+s.value,510,775);ctx.closePath()}ctx.save();var v="ripoffsoccercards.tk - Soccer Spirits (C) Com2uS";ctx.beginPath();ctx.globalAlpha=.5;ctx.font="9pt sans-serif";ctx.textAlign="center";ctx.fillStyle="black";ctx.fillText(v,canvas.width/2,792);ctx.closePath();ctx.restore()}function c(){if(this.files&&this.files[0]){var e=new FileReader;e.onload=function(e){var t=new Image;t.onload=function(){img["custom"]=t;l()};t.src=e.target.result};e.readAsDataURL(this.files[0])}$(".custom").prop("disabled",false)}$("#fileUpload").on("change",function(e){if(this.files&&this.files[0]){var t=new FileReader;t.onload=function(e){var t=new Image;t.onload=function(){img["custom"]=t;l()};t.src=e.target.result};t.readAsDataURL(this.files[0])}$(".custom").prop("disabled",false)});var e=document.getElementById("fileUpload");e.addEventListener("change",c,false);var t=document.getElementById("cusTextRank");t.addEventListener("change",l,false);var n=document.getElementById("cusTextName");n.addEventListener("change",l,false);var r=document.getElementById("cusTextLvl");r.addEventListener("change",l,false);var i=document.getElementById("cusTextCost");i.addEventListener("change",l,false);var s=document.getElementById("cusTextSkill");s.addEventListener("change",l,false);var o=document.getElementById("cusScale");o.addEventListener("change",l,false);var u=document.getElementById("cusRotate");u.addEventListener("change",l,false);var a=document.getElementById("cusX");a.addEventListener("change",l,false);var f=document.getElementById("cusY");f.addEventListener("change",l,false);$("#progress").hide();$("#all").show();$(".custom").prop("disabled",true);$("#reset").click(function(){ctx.drawImage(gray,0,0);e="";e.value="";$(".custom").prop("disabled",true);t.value=3;n.value="Name";r.value=1;i.value=10;s.value=1;o.value=1;a.value=0;f.value=0});$(".attr").click(function(){attr=this.value;l()})}var canvas=document.getElementById("canvas");var ctx=canvas.getContext("2d");var container=document.getElementById("container");var images="./assets/img/";var fonts="./assets/fonts/";var img={};var layer={};var attr="a";var loadedImages=0;var numberImages=24;var gray=new Image;gray.onload=function(){ctx.drawImage(gray,0,0)};gray.src=images+"creator/gray.png";preload()